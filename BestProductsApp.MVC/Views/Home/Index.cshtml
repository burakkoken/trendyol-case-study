@inject IOptions<AppModel> App
@{
	ViewData["Title"] = "Home Page";
	string baseApiUrl = App?.Value?.BaseApiUrl;
}


<div class="container">
	<br />
	<div style="width:90%; margin:0 auto;">
		<table id="example" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
			<thead>
				<tr>
					<th>Id</th>
					<th>Name</th>
					<th>Price</th>
					<th>Last Updated Time</th>
				</tr>
			</thead>
		</table>
	</div>
</div>
@section styles{
	<!--<environment include="Development">-->
	<link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
	<link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />
	<!--</environment>-->
}

@section scripts{
	<!--<environment include="Development">
		-->
	<script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js "></script>
	<!--</environment>-->
	<script>
        $(document).ready(function (){
            $("#example").DataTable({
                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "ajax": {
					"url": "@baseApiUrl/api/products/list-cache",
					"type": "POST",
					"contentType": "application/json",
					"data": function (d) {
						console.log(JSON.stringify(d));
						return JSON.stringify(d);
					}
                },
                "columns": [
                    { "data": "id", "name": "Id", "autoWidth": true },
                    { "data": "name", "name": "Name", "autoWidth": true },
                    { "data": "price", "name": "Price", "autoWidth": true },
					{ "data": "lastUpdatedTime", "name": "Last Updated Time", "autoWidth": true }
                ]
            });
        });

	</script>

}
